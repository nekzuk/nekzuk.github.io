<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NAI Smart Studio - 操作マニュアル</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-header">
        NAI Smart Studio <br />
        <span style="font-size: 0.8em; color: #565f89">Operation Manual</span>
      </div>
      <ul class="nav-links">
        <li><a href="#intro" class="active">はじめに</a></li>
        <li><a href="#setup">初回セットアップ</a></li>
        <li><a href="#basic">画像生成の基本</a></li>
        <li><a href="#import">画像インポート</a></li>
        <li><a href="#i2i">Image-to-Image</a></li>
        <li><a href="#upscale">かんたんアップスケール</a></li>
        <li><a href="#batch">連続生成</a></li>
        <li><a href="#vibe">NovelAIポーション</a></li>
        <li><a href="#reference">精密参照</a></li>
        <li><a href="#wildcards">Wildcards（ランダム要素）</a></li>
        <li><a href="#presets">プリセット</a></li>
        <li><a href="#search">プロンプト検索</a></li>
        <li><a href="#settings">設定・その他機能</a></li>
        <li><a href="#shortcuts">ショートカット</a></li>
      </ul>
      <div class="sidebar-footer">
        <a
          href="https://nekzuk.com/nai-smart-studio_j.html"
          class="back-to-product"
        >
          ← 製品ページに戻る
        </a>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
      <header class="top-bar">v1.0 ドキュメント</header>

      <div class="content-scroll">
        <div class="content-wrapper">
          <section id="intro">
            <h1>はじめに</h1>
            <p>
              NAI Smart
              Studioは、NovelAIでの画像生成をより快適に行うためのツールです。
              Text-to-Image / Image-to-Image / Inpaint に加え、ワイルドカード、プロンプト検索、連続生成、かんたんアップスケールなど、公式UIにはない便利な機能を提供します。
            </p>
            <div class="note">
              <strong>注意:</strong> 基本的な生成パラメータ（Steps, Scale,
              Samplerなど）や、NovelAI自体の標準機能については、<a
                href="https://docs.novelai.net/"
                target="_blank"
                style="color: var(--accent-color)"
                >NovelAI公式ドキュメント</a
              >をご参照ください。本マニュアルでは、本ツール独自の機能を中心に解説します。
            </div>

            <h3>画面構成</h3>
            <p>画面は3つのエリアに分かれています。</p>
            <ul>
              <li><strong>左パネル</strong>: プロンプトやパラメーターの設定</li>
              <li>
                <strong>中央パネル</strong>: Canvas（キャンバス）と各種タブ
              </li>
              <li><strong>右パネル</strong>: 生成履歴</li>
            </ul>
            <img src="images/000.png" alt="Main UI" class="screenshot" />
          </section>

          <section id="setup">
            <h1>初回セットアップ</h1>
            <p>
              本ツールを使用するには、NovelAIのAPIキーが必要です。
              初回起動時にAPIキーが設定されていない場合、設定を促すダイアログが表示されます。
            </p>
            <img
              src="images/API_001.png"
              alt="API Key Dialog"
              class="screenshot"
            />

            <h3>APIキーの取得方法</h3>
            <ol>
              <li>
                <a
                  href="https://novelai.net/"
                  target="_blank"
                  style="color: var(--accent-color)"
                  >NovelAI公式サイト</a
                >にログインします。
              </li>
              <li>
                右上のアカウントメニューから「アカウント設定」を開きます。
              </li>
              <li>
                「アカウント」タブ内の「永続的APIトークンを取得」から、APIキーを取得・コピーします。
              </li>
            </ol>
            <img
              src="images/API_002.png"
              alt="API Key Settings"
              class="screenshot"
            />
            <h3>APIキーの登録</h3>
            <p>
              初回起動時はチュートリアルに沿えば自動的に設定画面が開かれるため、「一般」タブでAPIキーを登録します。
            </p>
            <img
              src="images/API_003.png"
              alt="API Key Registration"
              class="screenshot"
            />
            <div class="note">
              複数のNovelAIアカウントを持っている場合、複数のAPIキーを登録して切り替えることができます。
            </div>
          </section>

          <section id="basic">
            <h1>画像生成の基本</h1>
            <p>
              左パネルにプロンプトと各種パラメーターを設定し、「生成」ボタンをクリックすると画像が生成されます。
            </p>
            <img src="images/001.png" alt="Side bar" class="screenshot" />
            <h3>プロンプト入力</h3>
            <ul>
              <li>
                <strong>メインプロンプト</strong>:
                生成したい画像の内容を記述します。
              </li>
              <li>
                <strong>ネガティブプロンプト</strong>:
                生成から除外したい要素を記述します。
              </li>
            </ul>

            <h3>キャラクタープロンプト</h3>
            <p>
              複数のキャラクターを描く場合、「キャラを追加」ボタンから個別のプロンプト欄を追加できます。
              これにより、各キャラクターの特徴を分けて指定できます。
            </p>

            <h3>基本パラメーター設定</h3>
            <p>
              「解像度テンプレート」から定番サイズを選択するか、幅・高さを個別に指定できます。
              <br />手動でも調整可能な他、ステップ数、CFGスケール、サンプラーやモデルなど、基本的なパラメーターが設定可能です。
            </p>

            <h3>生成コスト表示</h3>
            <p>
              生成ボタンの右側に、推定Anlasコストが表示されます。
              解像度やステップ数によってコストが変動します<br />（基本Opusプラン想定の設定のため、Tablet,
              Scrollプランの場合、ズレが発生する可能性があります）。
            </p>
          </section>

          <section id="import">
            <h1>画像インポート</h1>
            <p>
              キャンバスに画像ファイルをドラッグ＆ドロップ、もしくは右パネルの履歴から画像を「Shift
              + クリック」で選ぶことで<br />
              画像インポートウィンドウが表示されます。
            </p>
            <img
              src="images/IMPORT_001.png"
              alt="Mask Tools"
              class="screenshot"
            />
            <p>
              画像インポートウィンドウでは画像をどこにセットするか選択できます。
            </p>
            <ul>
              <li>
                <strong>Image to image / inpaint</strong>:
                画像をキャンパスにセットします。
              </li>
              <li>
                <strong>NovelAI ポーション</strong>: 画像をNovelAI
                ポーションタブにセットします。
              </li>
              <li>
                <strong>精密参照</strong>: 画像を精密参照タブにセットします。
              </li>
              <li>
                <strong>メタデータをインポート</strong>:
                メタデータをインポートし、画像をキャンパスにセットします
              </li>
            </ul>
            <p>
              右パネルの履歴から画像を通常クリックで選択した場合は「Image to
              image / inpaint (画像をキャンパスにセット)」になります。
            </p>
          </section>

          <section id="i2i">
            <h1>Image-to-Image / Inpaint</h1>
            <p>
              既存の画像を元に新しい画像を生成したり、画像の一部だけを描き直す機能です。
            </p>
            <img src="images/002.png" alt="Mask Tools" class="screenshot" />
            <h3>Inpaint（部分修正）</h3>
            <p>
              画像の一部だけを描き直したい場合は、マスクを描画します。
              黒く塗られた部分だけが再生成されます。<br />左ドラック：マスク描画、右ドラッグ：マスク消去
            </p>
            <ul>
              <li><strong>ブラシ</strong>: フリーハンドでマスクを描画</li>
              <li><strong>長方形</strong>: 矩形範囲を選択</li>
              <li><strong>折れ線</strong>: 多角形範囲を選択</li>
            </ul>

            <h3>Strength（強度）</h3>
            <p>
              元画像からどれだけ変化させるかを調整します。
              値が大きいほど元画像から離れた結果になります。
            </p>
            <ul>
              <li><strong>1.0</strong>: 完全に新しく生成（マスク部分）</li>
              <li><strong>0.0</strong>: ほぼ元画像のまま</li>
            </ul>

            <h3>Noise</h3>
            <p>AIが画像にディテールを追加する程度。</p>
            <ul>
              <li><strong>1.0</strong>: 元画像にディティールを追加する</li>
              <li><strong>0.0</strong>: 元画像のディティールを維持する</li>
            </ul>

            <h3>Undo / Redo</h3>
            <p>
              生成結果を元に戻したい場合は「←
              Undo」ボタンで直前の画像に戻れます。「→
              Redo」で取り消した操作をやり直せます。
            </p>
          </section>

          <section id="upscale">
            <h1>かんたんアップスケール（Opus専用）</h1>
            <p>
              画像を高解像度化する専用モードです。NovelAI標準のアップスケールと比べて、<strong>元画像の雰囲気を保ちやすい</strong>ことを重視しています。<br />
              また、Opusユーザー向けの動作に最適化されており、通常利用範囲では<strong>追加Anlas消費ゼロ</strong>でアップスケールできます。
            </p>
            <img
              src="images/UPSCALE_001.png"
              alt="Simple Upscale"
              class="screenshot"
            />

            <h3>使い方</h3>
            <ol>
              <li>Canvasに画像を読み込みます（履歴クリックでも可）。</li>
              <li>中央下部の「かんたんアップスケール」を押してモードを切り替えます。</li>
              <li>アップスケーラー、倍率、強度を調整します。</li>
              <li>「生成」ボタンでアップスケールを実行します。</li>
            </ol>
            <p>
              出力画像は通常生成と同じく <code>output/YYYY-MM-DD/</code> に保存されます。
            </p>
            <div class="note">
              画像ファイル名は <code>nai_sd_upscale_YYYYMMDD_HHMMSS.png</code> 形式で保存されます。
            </div>
          </section>

          <section id="batch">
            <h1>連続生成</h1>
            <p>
              自動で大量の画像を生成するための機能です。枚数指定のほか、時間指定などにも対応しています。<br />
              左パネル「連続生成」セクションから設定します。
            </p>
            <img src="images/005.png" alt="Batch Settings" class="screenshot" />
            <h3>生成モード</h3>
            <ul>
              <li>
                <strong>枚数指定</strong>: 指定した枚数（例:
                100枚）を生成して終了します。
              </li>
              <li>
                <strong>時間指定</strong>: 指定した時間（例:
                60分）が経過するまで生成し続けます。
              </li>
              <li>
                <strong>中断するまで</strong>:
                停止ボタンを押すまで無限に生成します。
              </li>
              <div class="note">
                ※短期間に大量の画像生成を行うこと、短い遅延時間で連続生成することはアカウント制限やBANのリスクがあります。
                <br />　使用においては十分な待機時間を設定し、上記リスクを認識の上でご使用ください。
              </div>
            </ul>
          </section>

          <section id="vibe">
            <h1>NovelAIポーション</h1>
            <p>
              参照画像から「雰囲気」「画風」「構図」を抽出して生成画像に適用します。
              NovelAI v3～V4.5モデルで使用できます。
            </p>
            <img
              src="images/003.png"
              alt="NovelAI Portion"
              class="screenshot"
            />
            <h3>使い方</h3>
            <ol>
              <li>左パネルの「NovelAIポーション」セクションを開きます。</li>
              <li>
                「＋」ボタンをクリックして画像やポーションを追加します（複数追加可能）。
              </li>
              <li>参照強度と情報抽出度を調整します。</li>
              <li>その後、生成ボタンを押します（スロット上の「調合」ボタンを押してない場合、自動で調合が行われます）</li>
            </ol>

            <h3>パラメーター</h3>
            <ul>
              <li>
                <strong>参照強度 (Reference Strength)</strong>:
                参照画像の影響度合い。高いほど参照に近づきます。
              </li>
              <li>
                <strong>情報抽出度 (Information Extracted)</strong>:
                参照から抽出する情報量。高いほど詳細を取り込みます。
              </li>
            </ul>

            <h3>ポーションセット</h3>
            <p>
              よく使う参照画像の組み合わせはセットとして保存できます。保存したセットは後から読み込んで再利用できます。
            </p>
            <ul>
              <li><strong>.naiv4vibe / .naiv4vibeBundle</strong>: ポーションセットの保存・読み込みに対応</li>
              <li><strong>画像へのBundle埋め込み</strong>: 画像ファイルへポーション情報を含めて保存可能</li>
            </ul>
          </section>

          <section id="reference">
            <h1>精密参照</h1>
            <p>
              キャラクターのデザインやスタイルを固定・参照させます。キャラ参照機能から拡張された機能です。
              ※v4～V4.5のモデルでのみ使用できます。
            </p>
            <img
              src="images/004.png"
              alt="NovelAI reference"
              class="screenshot"
            />
            <h3>使い方</h3>
            <ol>
              <li>左パネルの「精密参照」セクションを開きます。</li>
              <li>
                「＋」ボタンをクリックして参照画像を追加します（複数追加可能）。
              </li>
              <li>
                キャラクター / 絵柄 /
                キャラクターと絵柄のどれを参照するか選択します。
              </li>
              <li>参照強度と情報抽出度を調整します。</li>
              <li>設定後、生成ボタンを押します。</li>
            </ol>

            <h3>パラメーター</h3>
            <ul>
              <li>
                <strong>強度 (Strength)</strong>: 参照画像の視覚的要素を、AI
                がどれだけ強く再現しようとするかをコントロールします。
              </li>
              <li>
                <strong>抽出度 (Extracted)</strong>: 0
                のときは旧バージョンの挙動（スタイルや全体構図に対してやや柔軟）になり、1
                に近づけるほど新しい挙動（キャラクターのディテールがより出やすい）になります。
              </li>
            </ul>
          </section>

          <section id="wildcards">
            <h1>Wildcards（ランダム要素）</h1>
            <p>
              指定した単語リストからランダムに1つを選んでプロンプトに挿入する機能です。<br />
              髪の色、服装、背景などをランダム化して、バリエーション豊かな生成ができます。
              TXT / YAMLの2種のファイルに対応しています
            </p>
            <img src="images/006.png" alt="Wildcards Tab" class="screenshot" />
            <h3>基本の文法</h3>
            <ul>
              <li>{A|B|C}: 候補の中から1つをランダムに選択</li>
              <li>__name__: Wildcard ファイル から1つをランダムに選択</li>
              <li>以下の拡張構文は現バージョンでは非対応になります</li>
              <ul>
                <li>重み指定 {0.5::red|0.1::white|0.2::black}</li>
                <li>複数選択 {2$$cat|dog|bird` や 範囲 {1-2$$cat|dog}</li>
                <li>変数 ${name=...} など</li>
              </ul>
            </ul>
            <h3>基本の使い方</h3>
            <ol>
              <li>
                <strong>ファイルの用意</strong>:
                wildcardsフォルダー内にTXTかYAMLのワイルドカードファイルを用意します
              </li>
              <li>
                <strong>プロンプトへの記述</strong>:
                使用したいワイルドカードを選び、「構文をコピー」ボタンを押します
              </li>
              <li>
                <strong>生成</strong>:
                プロンプトにコピーしたものを貼り付けます。生成実行時に__name__
                の部分がランダムな要素に置き換えられます
              </li>
            </ol>

            <h4>Wildcards：TXT文法</h4>
            <ul>
              <li>TXTのワイルドカードファイル は 1行=1候補 です</li>
              <li>空行と # で始まる行は無視されます</li>
            </ul>
            <h4>Wildcards：YAML文法</h4>
            <ul>
              <li>
                YAMLのワイルドカードファイルは key: list 形式で階層化できます
              </li>
              <li>詳しくはユーザーマニュアル.mdを参照ください</li>
            </ul>
            <div class="note">
              中央パネルの「Wildcards」タブから、既存ファイルの内容確認ができます
              （内容編集は後日アップデートで対応予定です）。
            </div>
          </section>

          <section id="presets">
            <h1>プリセット</h1>
            <p>
              よく使う共通プロンプトや除外タグをテンプレートとして管理する機能です。
              中央パネルの「プリセット」タブからアクセスできます。
            </p>
            <h3>主な機能</h3>
            <ul>
              <li>
                <strong>先頭/末尾タグ (Prefix/Suffix)</strong>:
                すべての生成プロンプトの先頭または末尾に、指定したテキストを自動挿入します。<br />
                例: 画質タグ（<code>masterpiece, best quality</code
                >）を常に末尾につける、など。
              </li>
              <li>
                <strong>自動除外 (Exclusion)</strong>:
                プロンプトに特定の単語が含まれていた場合、生成時に自動的に削除します。
              </li>
              <li>
                <strong>プロンプト整形・整理</strong>:
                重複削除やスペース削除などの整形が自動で行われます
              </li>
              <li>
                <strong>プリセット保存</strong>:
                上記の設定を名前付きで保存し、切り替えて使用できます。
              </li>
            </ul>
            <img
              src="images/007.png"
              alt="Advanced Prompt Settings"
              class="screenshot"
            />
          </section>

          <section id="search">
            <h1>プロンプト検索</h1>
            <p>
              プロンプトデータベースから関連するプロンプトサンプルを検索し、生成キューへ直接投入できる機能です。
            </p>

            <h3>セットアップ</h3>
            <p>
              初回使用時は、検索用データベースの構築が必要です。<br />
              「設定」→「検索(Search)」セクションの「セットアップウィザードを起動」をクリックしてください。<br />
              ※7.6GBのダウンロードが必要のため、時間に余裕のあるときに実施ください。
            </p>
            <img src="images/008.png" alt="Setup Wizard" class="screenshot" />
            <p>
              自動的にデータをダウンロードし、インデックスを作成します。完了後、プロンプト検索を有効にすると、中央パネルに「プロンプト検索」タブが表示されます。
            </p>
            <h3>検索の実行</h3>
            <p>中央パネルの「プロンプト検索」タブを使用します。</p>
            <img src="images/009.png" alt="Prompt Search" class="screenshot" />

            <ul>
              <li>
                <strong>含めるタグ</strong>:
                検索したいキーワードを入力します。AND検索はコンマ区切り、OR検索は
                <code>{A|B}</code> の形式で指定します。
              </li>
              <li>
                <strong>除外するタグ</strong>:
                検索結果から除外したいキーワードを入力します。
              </li>
              <li>
                <strong>レーティング</strong>: 検索対象のレーティング（General,
                Sensitiveなど）をフィルタリングします。
              </li>
              <li>
                <strong>出力フィルタリング設定</strong>:
                作品名やキャラクター名などを生成時に自動除外します。
              </li>
              <li>
                <strong>Prompt Upscaler設定</strong>:
                生成キュー実行時にタグ推論を使ってプロンプトを補強します。※PCスペックによって処理に時間がかかる可能性があります。
              </li>
            </ul>
            <p>
              検索結果はリスト表示され、クリックで詳細を確認できます。<br />
              ヒット件数が多い場合、表示は最大1000件までに制限されます（検索自体は全件対象）。
            </p>

            <p>
              <strong>「検索結果を生成キューに追加」</strong> ボタンは、結果をシャッフル順で<strong>1000件ずつ</strong>キューに追加します。<br />
              「生成」ボタンを押すと、キューに登録されたプロンプトが順番に使用されます。<br />
              モデル、画像サイズ、Steps等のパラメーターは<strong>現在のメイン画面の設定</strong>が適用されます。
            </p>
          </section>

          <section id="settings">
            <h1>設定・その他機能</h1>

            <h3>プロンプト入力補完＆タグ詳細表示</h3>
            <p>プロンプトの入力補完やタグ詳細表示が行えます</p>
            <ul>
              <li>
                <strong>プロンプト入力補完</strong>:
                入力時に入力候補が表示されます、英語のほか日本語のキーワードにも対応しており、<br />プロンプト入力を効率的に行えます。
                候補から選ばない場合は ,(カンマ)で補完ウィンドウを閉じます。
              </li>
              <li>
                <strong>タグ詳細表示</strong>:
                「タグ詳細」ボタンからタグの詳細を確認できます。<br />
                タグを選ぶことでそのタグを削除できるほか、？を押すことでwikiの説明の確認が可能です。
              </li>
              <li>
                <strong>設定</strong>:
                これら入力補助の設定はファイル→設定→入力補助 (Assistance) タブから変更可能です。<br />
                またプロンプト欄のフォントや文字サイズも変更可能です。
              </li>
            </ul>
            <img
              src="images/010.png"
              alt="Input Assistance"
              class="screenshot"
            />
            <h3>Eagle 連携</h3>
            <p>
              画像管理ソフト「Eagle」への自動保存設定です。生成と同時に、プロンプト情報もタグとしてEagleへ送信されます。
            </p>
            <img
              src="images/011.png"
              alt="Eagle Integration"
              class="screenshot"
            />

            <h3>補助機能</h3>
            <ul>
              <li><strong>生成中プレビュー</strong>: 設定の「一般」で有効化すると、生成中の途中プレビューをCanvasに表示できます。</li>
              <li><strong>起動時アップデート確認</strong>: 設定の「一般」で有効化すると、起動時に新バージョン確認を行います。</li>
            </ul>

            <h3>設定画面一覧</h3>
            <div class="gallery">
              <div>
                <h4>一般 (General)</h4>
                <img src="images/012.png" alt="General" />
              </div>
              <div>
                <h4>入力補助 (Assistance)</h4>
                <img src="images/013.png" alt="Input" />
              </div>
              <div>
                <h4>検索 (Search)</h4>
                <img src="images/014.png" alt="Input" />
              </div>
              <div>
                <h4>その他 (Others)</h4>
                <img src="images/015.png" alt="Other" />
              </div>
            </div>
          </section>

          <section id="shortcuts">
            <h1>ショートカット</h1>
            <p>
              よく使うショートカットの一覧です。メニュー「ショートカット(S)」からも確認できます。
            </p>
            <img
              src="images/SHORTCUTS_001.png"
              alt="Shortcut List"
              class="screenshot"
            />

            <h3>生成・実行</h3>
            <ul>
              <li><span class="kbd">Ctrl + Enter</span>: 生成開始</li>
              <li><span class="kbd">Ctrl + Shift + Enter</span>: 連続生成開始</li>
            </ul>

            <h3>キャンバス / マスク</h3>
            <ul>
              <li><span class="kbd">←</span>: 画像履歴 Undo</li>
              <li><span class="kbd">→</span>: 画像履歴 Redo</li>
              <li><span class="kbd">Ctrl + Z</span>: マスク Undo</li>
              <li><span class="kbd">Ctrl + Y</span>: マスク Redo</li>
            </ul>

            <h3>Prompt Editor</h3>
            <ul>
              <li><span class="kbd">Ctrl + /</span>: 行コメント切替</li>
              <li><span class="kbd">Ctrl + ↑</span>: 現在行を上へ移動</li>
              <li><span class="kbd">Ctrl + ↓</span>: 現在行を下へ移動</li>
              <li><span class="kbd">Shift + Enter</span>: 下に空行を追加</li>
            </ul>

            <h3>ファイル操作</h3>
            <ul>
              <li><span class="kbd">Ctrl + O</span>: 画像を開く</li>
              <li><span class="kbd">Ctrl + S</span>: 名前を付けて保存（画像選択時）</li>
              <li><span class="kbd">Ctrl + C</span>: 画像をコピー（画像選択時）</li>
              <li><span class="kbd">Ctrl + E</span>: Eagleに保存（画像選択時）</li>
              <li><span class="kbd">Ctrl + Shift + E</span>: 保存先フォルダを開く（画像選択時）</li>
            </ul>
          </section>

          <br /><br /><br />
          <footer
            style="
              border-top: 1px solid #414868;
              padding-top: 20px;
              color: #565f89;
              text-align: center;
            "
          >
            &copy; 2026 NAI Smart Studio Project
          </footer>
        </div>
      </div>
    </main>

    <script>
      // Simple script to highlight active section in sidebar
      const sections = document.querySelectorAll("section");
      const navLi = document.querySelectorAll(".nav-links li a");

      document
        .querySelector(".content-scroll")
        .addEventListener("scroll", () => {
          let current = "";
          sections.forEach((section) => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            if (
              document.querySelector(".content-scroll").scrollTop >=
              sectionTop - 150
            ) {
              current = section.getAttribute("id");
            }
          });

          navLi.forEach((a) => {
            a.classList.remove("active");
            if (a.getAttribute("href").includes(current)) {
              if (current !== "") a.classList.add("active");
            }
          });
        });
    </script>
  </body>
</html>
