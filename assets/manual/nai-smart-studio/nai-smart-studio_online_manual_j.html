<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NAI Smart Studio - 操作マニュアル</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-header">
        NAI Smart Studio <br />
        <span style="font-size: 0.8em; color: #565f89">Operation Manual</span>
      </div>
      <ul class="nav-links">
        <li><a href="#intro" class="active">はじめに</a></li>
        <li><a href="#setup">初回セットアップ</a></li>
        <li><a href="#basic">画像生成の基本</a></li>
        <li><a href="#i2i">Image-to-Image</a></li>
        <li><a href="#vibe">Vibe Transfer</a></li>
        <li><a href="#wildcards">Wildcards</a></li>
        <li><a href="#search">プロンプト検索</a></li>
        <li><a href="#presets">プリセット</a></li>
        <li><a href="#batch">連続生成</a></li>
        <li><a href="#settings">設定・その他</a></li>
      </ul>
      <div class="sidebar-footer">
        <a href="https://nekzuk.com/nai-smart-studio_j.html" class="back-to-product">
          ← 製品ページに戻る
        </a>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
      <header class="top-bar">v1.2.0 ドキュメント</header>

      <div class="content-scroll">
        <div class="content-wrapper">
          <section id="intro">
            <h1>はじめに</h1>
            <p>
              NAI Smart
              Studioは、NovelAIでの画像生成をより快適に行うためのツールです。
              ワイルドカード、プロンプト検索、連続生成など、公式UIにはない便利な機能を提供します。
            </p>
            <div class="note">
              <strong>注意:</strong> 基本的な生成パラメータ（Steps, Scale,
              Samplerなど）や、NovelAI自体の標準機能については、<a
                href="https://docs.novelai.net/"
                target="_blank"
                style="color: var(--accent-color)"
                >NovelAI公式ドキュメント</a
              >をご参照ください。<br />
              本マニュアルでは、本ツール独自の機能を中心に解説します。
            </div>

            <h3>画面構成</h3>
            <p>画面は3つのエリアに分かれています。</p>
            <ul>
              <li><strong>左パネル</strong>: プロンプトやパラメータの設定</li>
              <li>
                <strong>中央パネル</strong>: Canvas（キャンバス）と各種タブ
              </li>
              <li><strong>右パネル</strong>: 生成履歴</li>
            </ul>
            <img src="images/001.png" alt="Main UI" class="screenshot" />
          </section>

          <section id="setup">
            <h1>初回セットアップ</h1>
            <p>
              本ツールを使用するには、NovelAIのAPIキーが必要です。
              初回起動時にAPIキーが設定されていない場合、設定を促すダイアログが表示されます。
            </p>
            <img
              src="images/017.png"
              alt="API Key Dialog"
              class="screenshot"
            />

            <h3>APIキーの取得方法</h3>
            <ol>
              <li>
                <a
                  href="https://novelai.net/"
                  target="_blank"
                  style="color: var(--accent-color)"
                  >NovelAI公式サイト</a
                >にログインします。
              </li>
              <li>右上のアカウントメニューから「Settings」を開きます。</li>
              <li>
                「Account」タブ内の「Get Persistent API
                Token」から、APIキーを取得・コピーします。
              </li>
            </ol>

            <h3>APIキーの登録</h3>
            <p>
              メニューバーの「設定」→「設定」から設定画面を開き、「一般」タブでAPIキーを登録します。
            </p>
            <img
              src="images/018.png"
              alt="API Key Settings"
              class="screenshot"
            />
            <div class="note">
              複数のNovelAIアカウントを持っている場合、複数のAPIキーを登録して切り替えることができます。
            </div>
          </section>

          <section id="basic">
            <h1>画像生成の基本</h1>
            <p>
              左パネルにプロンプトと各種パラメータを設定し、「生成」ボタンをクリックすると画像が生成されます。
            </p>

            <h3>プロンプト入力</h3>
            <ul>
              <li>
                <strong>メインプロンプト</strong>:
                生成したい画像の内容を記述します。
              </li>
              <li>
                <strong>ネガティブプロンプト</strong>:
                生成から除外したい要素を記述します。
              </li>
            </ul>

            <h3>キャラクタープロンプト</h3>
            <p>
              複数のキャラクターを描く場合、「キャラを追加」ボタンから個別のプロンプト欄を追加できます。
              これにより、各キャラクターの特徴を分けて指定できます。
            </p>

            <h3>解像度設定</h3>
            <p>
              「解像度テンプレート」から定番サイズを選択するか、幅・高さを個別に指定できます。
              サイズはNovelAIの仕様に合わせて64ピクセル単位で調整されます。
            </p>

            <h3>生成コスト表示</h3>
            <p>
              生成ボタンの右側に、推定Anlasコストが表示されます。
              解像度やステップ数によってコストが変動します。
            </p>
          </section>

          <section id="i2i">
            <h1>Image-to-Image / Inpaint</h1>
            <p>
              既存の画像を元に新しい画像を生成したり、画像の一部だけを描き直す機能です。
            </p>

            <h3>画像の読み込み</h3>
            <p>以下のいずれかの方法でキャンバスに画像を読み込みます：</p>
            <ul>
              <li>キャンバスに画像ファイルをドラッグ＆ドロップ</li>
              <li>右パネルの履歴から画像をクリック</li>
              <li>クリップボードから貼り付け（Ctrl+V）</li>
            </ul>
            <p>
              画像を読み込むと、自動的にImage-to-Imageモードに切り替わります。
            </p>
            <img
              src="images/019.png"
              alt="Canvas with Image"
              class="screenshot"
            />

            <h3>Inpaint（部分修正）</h3>
            <p>
              画像の一部だけを描き直したい場合は、マスクを描画します。
              白く塗られた部分だけが再生成されます。
            </p>
            <ul>
              <li><strong>ブラシ</strong>: フリーハンドでマスクを描画</li>
              <li><strong>長方形</strong>: 矩形範囲を選択</li>
              <li><strong>折れ線</strong>: 多角形範囲を選択</li>
            </ul>
            <img
              src="images/020.png"
              alt="Mask Tools"
              class="screenshot"
            />

            <h3>Strength（強度）</h3>
            <p>
              元画像からどれだけ変化させるかを調整します。
              値が大きいほど元画像から離れた結果になります。
            </p>
            <ul>
              <li><strong>1.0</strong>: 完全に新しく生成（マスク部分）</li>
              <li><strong>0.5</strong>: 元画像と新規生成の中間</li>
              <li><strong>0.0に近い</strong>: ほぼ元画像のまま</li>
            </ul>

            <h3>Undo / Redo</h3>
            <p>
              生成結果を元に戻したい場合は「←
              Undo」ボタンで直前の画像に戻れます。 「→
              Redo」で取り消した操作をやり直せます。
            </p>
          </section>

          <section id="vibe">
            <h1>Vibe Transfer（ポーション）</h1>
            <p>
              参照画像のスタイルや雰囲気を新しい生成に反映させる機能です。
              NovelAI V4.5モデルで使用できます。
            </p>
            <img
              src="images/021.png"
              alt="Vibe Transfer"
              class="screenshot"
            />

            <h3>使い方</h3>
            <ol>
              <li>
                左パネルの「Vibe Transfer(ポーション)」セクションを開きます。
              </li>
              <li>「＋」ボタンをクリックして参照画像を追加します。</li>
              <li>参照強度と情報抽出度を調整します。</li>
            </ol>

            <h3>パラメータ</h3>
            <ul>
              <li>
                <strong>参照強度 (Reference Strength)</strong>:
                参照画像の影響度合い。高いほど参照に近づきます。
              </li>
              <li>
                <strong>情報抽出度 (Information Extracted)</strong>:
                参照から抽出する情報量。高いほど詳細を取り込みます。
              </li>
            </ul>

            <h3>ポーションセット</h3>
            <p>
              よく使う参照画像の組み合わせは「📦」ボタンからセットとして保存できます。
              保存したセットは後から読み込んで再利用できます。
            </p>
          </section>

          <section id="wildcards">
            <h1>Wildcards（ランダム要素）</h1>
            <p>
              指定した単語リストからランダムに1つを選んでプロンプトに挿入する機能です。<br />
              髪の色、服装、背景などをランダム化して、バリエーション豊かな生成ができます。
            </p>
            <img
              src="images/002.png"
              alt="Wildcards Tab"
              class="screenshot"
            />

            <h3>使い方</h3>
            <ol>
              <li>
                <strong>ファイルの用意</strong>:
                <code>wildcards</code> フォルダ内にテキストファイル（例:
                <code>color.txt</code>）を作成し、1行に1つ単語を記述します。
              </li>
              <li>
                <strong>プロンプトへの記述</strong>:
                プロンプト入力欄に、ファイル名をアンダースコア2つで囲んで記述します（例:
                <code>__color__</code>）。
              </li>
              <li>
                <strong>生成</strong>: 生成実行時に
                <code>__color__</code> の部分が、<code>color.txt</code>
                内のいずれかの行に置換されます。
              </li>
            </ol>
            <div class="note">
              中央パネルの「Wildcards」タブから、既存ファイルの確認や編集ができます。
            </div>
          </section>

          <section id="search">
            <h1>プロンプト検索</h1>
            <p>
              タグデータベースから関連するタグを検索したり、過去のプロンプト履歴から参考になるフレーズを探す機能です。
            </p>

            <h3>セットアップ</h3>
            <p>
              初回使用時は、検索用データベースの構築が必要です。<br />
              「設定」→「検索
              (Search)」セクションの「セットアップウィザードを起動」をクリックしてください。
            </p>
            <img
              src="images/015.png"
              alt="Setup Wizard"
              class="screenshot"
            />
            <p>
              自動的にデータをダウンロードし、インデックスを作成します。完了すると中央パネルに「プロンプト検索」タブが表示されます。
            </p>

            <h3>検索の実行</h3>
            <p>中央パネルの「プロンプト検索」タブを使用します。</p>
            <img
              src="images/003.png"
              alt="Prompt Search"
              class="screenshot"
            />

            <ul>
              <li>
                <strong>含めるタグ</strong>:
                検索したいキーワードを入力します。AND検索はスペース区切り、OR検索は
                <code>{A|B}</code> の形式で指定します。
              </li>
              <li>
                <strong>除外するタグ</strong>:
                検索結果から除外したいキーワードを入力します。
              </li>
              <li>
                <strong>レーティング</strong>: 検索対象のレーティング（General,
                Sensitiveなど）をフィルタリングします。
              </li>
            </ul>
            <p>
              検索結果はリスト表示され、クリックで詳細を確認できます。<br />
              <strong>「検索結果を生成キューに追加」</strong
              >ボタンで、検索結果のプロンプトを連続生成の予約リストに登録できます。
            </p>
          </section>

          <section id="presets">
            <h1>プロンプトプリセット</h1>
            <p>
              よく使う共通プロンプトや除外タグをテンプレートとして管理する機能です。
              中央パネルの「プロンプトプリセット」タブからアクセスできます。
            </p>
            <img
              src="images/004.png"
              alt="Advanced Prompt Settings"
              class="screenshot"
            />

            <h3>主な機能</h3>
            <ul>
              <li>
                <strong>先頭/末尾タグ (Prefix/Suffix)</strong>:
                すべての生成プロンプトの先頭または末尾に、指定したテキストを自動挿入します。<br />
                例: 画質タグ（<code>masterpiece, best quality</code
                >）を常に末尾につける、など。
              </li>
              <li>
                <strong>自動除外 (Exclusion)</strong>:
                プロンプトに特定の単語が含まれていた場合、生成時に自動的に削除します。
              </li>
              <li>
                <strong>プリセット保存</strong>:
                上記の設定を名前付きで保存し、切り替えて使用できます。
              </li>
            </ul>
          </section>

          <section id="batch">
            <h1>連続生成</h1>
            <p>
              自動で大量の画像を生成するための機能です。枚数指定から、検索結果に基づいた生成まで対応しています。
            </p>

            <h3>基本的な連続生成</h3>
            <p>左パネル「連続生成」セクションから設定します。</p>
            <img
              src="images/007.png"
              alt="Batch Settings"
              class="screenshot"
            />

            <ul>
              <li>
                <strong>枚数指定</strong>: 指定した枚数（例:
                100枚）を生成して終了します。
              </li>
              <li>
                <strong>時間指定</strong>: 指定した時間（例:
                60分）が経過するまで生成し続けます。
              </li>
              <li>
                <strong>中断するまで</strong>:
                停止ボタンを押すまで無限に生成します。
              </li>
            </ul>

            <h3>検索キューからの生成</h3>
            <p>
              「プロンプト検索」で見つけたプロンプトを再利用して生成する機能です。
            </p>
            <ol>
              <li>プロンプト検索タブで検索を実行します。</li>
              <li>「検索結果を生成キューに追加」をクリックします。</li>
              <li>メイン画面に戻り、「生成」ボタンをクリックします。</li>
            </ol>
            <p>
              キューに登録されたプロンプトが順番に使用されます。<br />
              モデル、画像サイズ、Steps等のパラメータは<strong>現在のメイン画面の設定</strong>が適用されます。
            </p>
          </section>

          <section id="settings">
            <h1>設定・その他</h1>

            <h3>キャラクター参照 (Character Reference)</h3>
            <p>
              特定のキャラクターの見た目を維持したい場合に使用する機能です（V4.5モデル専用）。
              左パネルの「Character Reference」セクションから画像を登録します。
            </p>
            <img
              src="images/022.png"
              alt="Character Reference"
              class="screenshot"
            />

            <h3>Eagle 連携</h3>
            <p>
              画像管理ソフト「Eagle」への自動保存設定です。生成と同時に、プロンプト情報もタグとしてEagleへ送信されます。
            </p>
            <img
              src="images/013.png"
              alt="Eagle Integration"
              class="screenshot"
            />

            <h3>設定画面一覧</h3>
            <div class="gallery">
              <div>
                <h4>一般 (General)</h4>
                <img src="images/011.png" alt="General" />
              </div>
              <div>
                <h4>入力補助 (Assistance)</h4>
                <img src="images/012.png" alt="Input" />
              </div>
              <div>
                <h4>その他 (Other)</h4>
                <img src="images/016.png" alt="Other" />
              </div>
            </div>
          </section>

          <br /><br /><br />
          <footer
            style="
              border-top: 1px solid #414868;
              padding-top: 20px;
              color: #565f89;
              text-align: center;
            "
          >
            &copy; 2026 NAI Smart Studio Project
          </footer>
        </div>
      </div>
    </main>

    <script>
      // Simple script to highlight active section in sidebar
      const sections = document.querySelectorAll("section");
      const navLi = document.querySelectorAll(".nav-links li a");

      document
        .querySelector(".content-scroll")
        .addEventListener("scroll", () => {
          let current = "";
          sections.forEach((section) => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            if (
              document.querySelector(".content-scroll").scrollTop >=
              sectionTop - 150
            ) {
              current = section.getAttribute("id");
            }
          });

          navLi.forEach((a) => {
            a.classList.remove("active");
            if (a.getAttribute("href").includes(current)) {
              if (current !== "") a.classList.add("active");
            }
          });
        });
    </script>
  </body>
</html>
